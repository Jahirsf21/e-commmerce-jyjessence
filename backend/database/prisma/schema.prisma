generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Cliente {
  idCliente  String   @id @default(cuid())
  nombre     String
  apellido   String
  cedula     String   @unique
  genero     Genero
  email      String   @unique
  contrasena String
  telefono   String?
  direccion  String?
  role       Role     @default(USER)
  pedidos    Pedido[]
}

model Producto {
  idProducto  String             @id @default(cuid())
  nombre      String
  descripcion String
  categoria   CategoriaPerfume
  genero      Genero
  mililitros  Int
  precio      Float
  stock       Int
  pedidos     ArticuloDePedido[]
}

model Pedido {
  idPedido  String             @id @default(cuid())
  fecha     DateTime           @default(now())
  estado    String
  clienteId String
  articulos ArticuloDePedido[]
  cliente   Cliente            @relation(fields: [clienteId], references: [idCliente])
}

model ArticuloDePedido {
  pedidoId       String
  productoId     String
  cantidad       Int
  precioUnitario Float
  pedido         Pedido   @relation(fields: [pedidoId], references: [idPedido])
  producto       Producto @relation(fields: [productoId], references: [idProducto])

  @@id([pedidoId, productoId])
}

enum CategoriaPerfume {
  ExtraitDeParfum
  Parfum
  EauDeParfum
  EauDeToilette
  EauFraiche
  Elixir
}

enum Genero {
  Male
  Female
  Unisex
}

enum Role {
  USER
  ADMIN
}
